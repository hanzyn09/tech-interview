# 데이터베이스 Q&A

## DBMS란?
Database Management System의 약자로, 데이터베이스를 관리하는 소프트웨어 시스템입니다. 데이터의 저장, 검색, 수정, 삭제 등을 효율적으로 처리합니다.

### DBMS 구조
1. **질의 처리기**: SQL 쿼리 해석 및 실행 계획 생성
2. **저장 데이터 관리자**: 디스크의 데이터 파일 관리
3. **트랜잭션 관리자**: 동시성 제어 및 회복 관리
4. **버퍼 관리자**: 메모리와 디스크 간 데이터 이동 관리

### 질의처리기 작동 순서
1. **구문 분석**: SQL 구문 검사 및 파싱
2. **의미 분석**: 테이블, 컬럼 존재 여부 확인
3. **최적화**: 실행 계획 생성 및 최적화
4. **코드 생성**: 실행 가능한 코드 생성
5. **실행**: 쿼리 실행 및 결과 반환

### 옵티마이저
SQL 쿼리의 최적 실행 계획을 선택하는 DBMS 구성 요소입니다.
- **규칙 기반**: 미리 정의된 규칙 적용
- **비용 기반**: 통계 정보를 바탕으로 비용 계산

### DB 저장 공간
- **테이블스페이스**: 논리적 저장 단위
- **세그먼트**: 테이블이나 인덱스를 위한 공간
- **익스텐트**: 연속된 데이터 블록의 집합
- **블록/페이지**: 최소 I/O 단위

### DBMS Join 원리 종류
1. **Nested Loop Join**: 중첩 반복문 방식
2. **Hash Join**: 해시 테이블 이용
3. **Sort Merge Join**: 정렬 후 병합
4. **Index Join**: 인덱스 활용

### JDBC, ODBC 차이
- **JDBC**: Java Database Connectivity, Java 전용
- **ODBC**: Open Database Connectivity, 언어 독립적

### DDL, DML, DCL?
- **DDL** (Data Definition Language): CREATE, ALTER, DROP
- **DML** (Data Manipulation Language): SELECT, INSERT, UPDATE, DELETE
- **DCL** (Data Control Language): GRANT, REVOKE

## Key
데이터베이스에서 튜플을 유일하게 식별하는 속성 또는 속성들의 집합입니다.

**종류**:
- **기본키(Primary Key)**: 튜플을 유일하게 식별
- **외래키(Foreign Key)**: 다른 릴레이션의 기본키 참조
- **후보키(Candidate Key)**: 기본키가 될 수 있는 키
- **슈퍼키(Super Key)**: 튜플을 유일하게 식별할 수 있는 속성 집합

## 인덱스
데이터의 검색 속도를 향상시키기 위한 자료구조입니다.

**장점**: 빠른 검색, 정렬 성능 향상
**단점**: 추가 저장 공간, DML 성능 저하

### 클러스터드, 넌클러스터드 인덱스란?
- **클러스터드 인덱스**: 데이터 페이지 자체가 인덱스 키 순서로 정렬, 테이블당 하나만 가능
- **넌클러스터드 인덱스**: 별도의 인덱스 페이지, 데이터 페이지 주소 저장, 여러 개 가능

### 클러스터란?
여러 서버를 하나의 시스템처럼 동작하게 하는 기술입니다. 고가용성과 확장성을 제공합니다.

## 시퀀스
자동으로 순차적인 번호를 생성하는 데이터베이스 객체입니다. 주로 기본키 값 생성에 사용됩니다.

## 뷰
하나 이상의 테이블에서 유도된 가상 테이블입니다.

**장점**: 보안, 편의성, 독립성
**단점**: 성능 저하 가능, 제한된 DML 연산

## 트리거
특정 이벤트 발생 시 자동으로 실행되는 저장 프로시저입니다.

**종류**: BEFORE, AFTER, INSTEAD OF
**이벤트**: INSERT, UPDATE, DELETE

## 무결성
데이터베이스에 저장된 데이터의 정확성과 일관성을 보장하는 것입니다.

**종류**:
- **개체 무결성**: 기본키는 NULL이거나 중복될 수 없음
- **참조 무결성**: 외래키는 참조 테이블의 기본키 값이어야 함
- **도메인 무결성**: 속성 값은 정의된 도메인에 속해야 함
- **키 무결성**: 한 릴레이션에는 적어도 하나의 키가 존재해야 함

### 무결성 보장방법
- **제약 조건**: PRIMARY KEY, FOREIGN KEY, UNIQUE, CHECK
- **트리거**: 복잡한 비즈니스 규칙 적용
- **저장 프로시저**: 애플리케이션 로직에서 검증

## 정규화
데이터의 중복을 제거하고 무결성을 유지하기 위해 테이블을 분해하는 과정입니다.

**1NF**: 원자값으로 구성
**2NF**: 1NF + 부분 함수 종속성 제거
**3NF**: 2NF + 이행적 함수 종속성 제거
**BCNF**: 3NF + 모든 결정자는 후보키

### 정규형 필요 조건
- **1NF**: 모든 속성이 원자값
- **2NF**: 기본키에 완전 함수 종속
- **3NF**: 비기본키 속성 간 이행적 종속성 없음

### 함수적 종속성
속성 A의 값이 결정되면 속성 B의 값이 유일하게 결정되는 관계입니다. (A → B)

### 반정규화
성능 향상을 위해 의도적으로 정규화 규칙을 위반하는 것입니다.

**방법**: 테이블 통합, 컬럼 중복, 파생 컬럼 추가

## Anomaly
정규화가 제대로 되지 않은 테이블에서 발생하는 문제입니다.

- **삽입 이상**: 원하지 않는 정보까지 함께 삽입
- **삭제 이상**: 필요한 정보까지 함께 삭제
- **갱신 이상**: 중복된 정보의 일부만 갱신되어 불일치 발생

## SQL Injection
악의적인 SQL 코드를 삽입하여 데이터베이스를 공격하는 기법입니다.

**예방 방법**:
- Prepared Statement 사용
- 입력값 검증 및 이스케이프
- 권한 최소화
- 웹 애플리케이션 방화벽 사용

## 파티셔닝이란?
큰 테이블을 작은 단위로 나누어 관리하는 기법입니다.

**종류**:
- **수평 파티셔닝**: 행 단위로 분할
- **수직 파티셔닝**: 열 단위로 분할

**방법**: Range, Hash, List, Composite

### 샤딩이란
데이터를 여러 데이터베이스 서버에 분산 저장하는 기법입니다. 수평 파티셔닝의 일종입니다.

### 리플리케이션이란?
동일한 데이터를 여러 서버에 복제하여 저장하는 기법입니다.

**종류**:
- **Master-Slave**: 읽기 성능 향상
- **Master-Master**: 쓰기 성능 향상

### 클러스터링이란?
여러 서버를 연결하여 하나의 시스템처럼 동작하게 하는 기술입니다.

## 트랜잭션 특징 ACID

- **원자성(Atomicity)**: 모두 실행되거나 모두 실행되지 않음
- **일관성(Consistency)**: 실행 전후 데이터베이스가 일관된 상태 유지
- **격리성(Isolation)**: 동시 실행되는 트랜잭션들이 서로 영향을 주지 않음
- **지속성(Durability)**: 성공적으로 완료된 트랜잭션의 결과는 영구적으로 반영

### 트랜잭션 상태
- **활성(Active)**: 실행 중
- **부분완료(Partially Committed)**: 마지막 연산 실행 완료
- **완료(Committed)**: 정상적으로 완료
- **실패(Failed)**: 더 이상 실행할 수 없음
- **철회(Aborted)**: 롤백 완료

## 트랜잭션 격리 종류

| 격리 수준 | Dirty Read | Non-Repeatable Read | Phantom Read |
|-----------|------------|---------------------|--------------|
| READ UNCOMMITTED | O | O | O |
| READ COMMITTED | X | O | O |
| REPEATABLE READ | X | X | O |
| SERIALIZABLE | X | X | X |

## 낮은 격리단계 선택시 발생 문제
- **Dirty Read**: 커밋되지 않은 데이터 읽기
- **Non-Repeatable Read**: 같은 쿼리의 결과가 다름
- **Phantom Read**: 없던 레코드가 나타남

## Persistence Layer란?
애플리케이션에서 데이터 저장소(데이터베이스)에 접근하는 계층입니다. 비즈니스 로직과 데이터 접근 로직을 분리합니다.

## UML
Unified Modeling Language의 약자로, 시스템 설계를 위한 표준 모델링 언어입니다.

**다이어그램 종류**:
- **구조 다이어그램**: 클래스, 객체, 패키지
- **행위 다이어그램**: 유스케이스, 시퀀스, 활동

## MySQL 특징
- **오픈소스**: 무료 사용 가능
- **InnoDB**: 트랜잭션 지원, 외래키 제약조건
- **MyISAM**: 빠른 읽기 성능
- **복제**: Master-Slave 복제 지원
- **확장성**: 샤딩, 클러스터링 지원

## PostgreSQL 특징
- **객체 관계형**: 상속, 다형성 지원
- **ACID 완전 지원**: 강력한 트랜잭션 처리
- **확장성**: 사용자 정의 함수, 타입 지원
- **JSON 지원**: NoSQL 기능 제공
- **표준 준수**: SQL 표준 높은 준수율

## SQL vs NoSQL

| 구분 | SQL | NoSQL |
|------|-----|-------|
| 스키마 | 고정 스키마 | 유연한 스키마 |
| 확장성 | 수직 확장 | 수평 확장 |
| 트랜잭션 | ACID 완전 지원 | 제한적 지원 |
| 쿼리 | SQL 표준 | 제품별 상이 |
| 일관성 | 강한 일관성 | 최종 일관성 |

## CAP 이론
분산 시스템에서 다음 세 가지 중 최대 두 가지만 만족할 수 있다는 이론:
- **일관성(Consistency)**: 모든 노드가 같은 데이터 보유
- **가용성(Availability)**: 시스템이 항상 동작
- **분할 허용성(Partition Tolerance)**: 네트워크 분할에도 동작

## NoSQL 종류
1. **Key-Value**: Redis, DynamoDB
2. **Document**: MongoDB, CouchDB
3. **Column-Family**: Cassandra, HBase
4. **Graph**: Neo4j, ArangoDB

## NoSQL 사용경험
- **MongoDB**: JSON 형태 문서 저장, 유연한 스키마로 빠른 개발
- **Redis**: 캐싱, 세션 관리, 실시간 랭킹 시스템
- **Elasticsearch**: 로그 분석, 전문 검색 엔진

## Redis란?
Remote Dictionary Server의 약자로, 인메모리 키-값 데이터 구조 스토어입니다.

**특징**:
- **인메모리**: 매우 빠른 성능
- **영속성**: RDB, AOF를 통한 데이터 보존
- **다양한 자료구조**: String, Hash, List, Set, Sorted Set
- **용도**: 캐싱, 세션 관리, 실시간 분석

## 카산드라 특징
Apache Cassandra는 분산 NoSQL 데이터베이스입니다.

**특징**:
- **높은 가용성**: 단일 장애점 없음
- **선형 확장성**: 노드 추가로 성능 향상
- **최종 일관성**: 높은 성능과 가용성 제공
- **컬럼 패밀리**: 유연한 스키마 구조
- **용도**: 대용량 실시간 데이터 처리
